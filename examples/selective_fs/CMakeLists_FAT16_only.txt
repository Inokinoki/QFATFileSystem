# CMakeLists.txt for building with FAT16 support ONLY
# This example shows how to include only the FAT16 filesystem in your project
# to reduce binary size and compilation time

cmake_minimum_required(VERSION 3.11)
project(FAT16OnlyExample)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_AUTOMOC ON)

find_package(QT NAMES Qt6 Qt5 COMPONENTS Core REQUIRED)
find_package(Qt${QT_VERSION_MAJOR} COMPONENTS Core REQUIRED)

# Include the header
include_directories(../..)

# Build a library with ONLY FAT16 support
add_library(QFATFS_FAT16_ONLY
    ../../qfatfilesystem_base.cpp
    ../../qfat16filesystem.cpp
    # Note: We do NOT include qfat12filesystem.cpp or qfat32filesystem.cpp
)

target_link_libraries(QFATFS_FAT16_ONLY PUBLIC Qt${QT_VERSION_MAJOR}::Core)

# Build the example
add_executable(example_fat16_only example_fat16_only.cpp)
target_link_libraries(example_fat16_only QFATFS_FAT16_ONLY Qt${QT_VERSION_MAJOR}::Core)

# Usage instructions:
# 1. Copy this file to CMakeLists.txt in this directory
# 2. mkdir build && cd build
# 3. cmake ..
# 4. make
# 5. ./example_fat16_only
#
# Result: Your binary will include ONLY FAT16 support, making it smaller
